# FINAL YEAR PROJECT DEFENSE PRESENTATION

---

## SLIDE 1: TITLE SLIDE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                        â”‚
â”‚            DEDAN KIMATHI UNIVERSITY OF TECHNOLOGY                      â”‚
â”‚                          [LOGO]                                        â”‚
â”‚                                                                        â”‚
â”‚     DEPARTMENT OF ELECTRICAL & ELECTRONIC ENGINEERING                  â”‚
â”‚                                                                        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                        â”‚
â”‚              IoT-ENABLED AUTOMATIC RECHARGE SYSTEM                     â”‚
â”‚              FOR KENYAN PREPAID METERS BASED ON                        â”‚
â”‚              ADVANCED METERING INFRASTRUCTURE                          â”‚
â”‚                                                                        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                        â”‚
â”‚   Registration No.          Name                      Signature        â”‚
â”‚   E021-01-1297/2021        MOSES MAINGI              ___________       â”‚
â”‚   E021-01-1302/2021        KELVIN LIMO               ___________       â”‚
â”‚   E021-01-1318/2021        DANIEL KIMOI              ___________       â”‚
â”‚                                                                        â”‚
â”‚   SUPERVISOR: MR. NDEGWA                                               â”‚
â”‚                                                                        â”‚
â”‚   DECEMBER 2025                                                        â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## SLIDE 2: BACKGROUND OF STUDY

### The Kenyan Prepaid Electricity Landscape

â€¢ **Over 8 million prepaid meters** deployed by Kenya Power (KPLC)

â€¢ **M-Pesa dominates payments** - 75%+ of electricity purchases via mobile money

â€¢ **Current recharge process is outdated:**
  - User pays via M-Pesa â†’ Receives 20-digit SMS token â†’ Must manually enter token into meter

â€¢ **Major pain points affecting millions:**
  - SMS delivery delays (8% delayed >30 minutes, 2% fail completely)
  - Token entry errors (15-20% first-time entry failures)
  - Customer Interface Unit (CIU) failures (30% non-functional in informal settlements)

â€¢ **Economic impact:** Kenya Power loses revenue due to customer frustration and service delays

---

## SLIDE 3: PROBLEM STATEMENT & JUSTIFICATION

### Problem Statement

â€¢ Kenya's prepaid electricity system still relies on **manual 20-digit token entry** despite widespread M-Pesa adoption

â€¢ **SMS token delivery is unreliable** - network congestion causes delays/failures

â€¢ **CIU failures** leave customers unable to load purchased tokens

â€¢ **Existing smart meters are expensive** (KES 15,000-25,000) and lack M-Pesa integration

â€¢ **No automated end-to-end solution** exists that directly links M-Pesa payment to meter balance update

### Justification

â€¢ **3+ million KPLC customers** experience these issues daily

â€¢ **M-Pesa infrastructure is mature** (32M+ users) but underutilized for full automation

â€¢ **IoT technology costs have dropped** - ESP32 microcontroller costs <KES 800

â€¢ **Eliminates human intervention** - reduces errors, improves user experience

â€¢ **Cost-effective solution** using affordable, locally available components

---

## SLIDE 4: OBJECTIVES

### Main Objective

To design and implement an **IoT-enabled automatic recharge system** that seamlessly integrates M-Pesa mobile payments with prepaid electricity meters, **eliminating manual token entry** and providing real-time monitoring capabilities.

### Specific Objectives

1. **Design and prototype** an ESP32-based smart meter unit with Wi-Fi/GSM connectivity, OLED display, and load control simulation

2. **Develop a cloud backend** with M-Pesa Daraja API integration for automated payment processing and balance updates

3. **Create a user-friendly web dashboard** for real-time balance monitoring, consumption analytics, and one-click recharge

4. **Implement MQTT communication protocol** for bi-directional, real-time data exchange between meter and cloud

5. **Validate system performance** through comprehensive testing of end-to-end transaction flow

---

## SLIDE 5: LITERATURE REVIEW - EXISTING SYSTEMS

### What Has Been Done Before

| System/Research | Description | Limitations |
|-----------------|-------------|-------------|
| **Traditional Prepaid Meters (1980s)** | Physical tokens/smart cards | Manual vending points, card loss risk |
| **GSM-Based Meters (2000s)** | SMS token delivery | SMS delays, manual entry still required |
| **Kumar et al. (2020) - NodeMCU Meter** | Wi-Fi connectivity + web dashboard | No mobile money integration |
| **Okonkwo et al. (2021) - ESP32 Nigeria** | SMS alerts for low balance | Still uses manual token entry |
| **Githae et al. (2022) - LoRaWAN Kenya** | Rural solar-powered meter | No payment integration |
| **KPLC Smart Meters (2018)** | Limited pilot (200K units) | High cost (KES 12,000+), no M-Pesa automation |
| **UMEME Yaka (Uganda)** | Mobile money payment | Centralized vending, token generation delays |

### Common Gap in ALL Existing Systems

**Payment still triggers manual token entry - NO system automatically updates meter balance upon payment!**

---

## SLIDE 6: RESEARCH GAP - OUR UNIQUE CONTRIBUTION

### The Gap We Fill

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     EXISTING SYSTEMS                                     â”‚
â”‚                                                                          â”‚
â”‚   [User Pays] â†’ [Token Generated] â†’ [SMS Sent] â†’ [USER ENTERS TOKEN]    â”‚
â”‚                                                    â†‘                     â”‚
â”‚                                              MANUAL STEP                 â”‚
â”‚                                              (Error-prone)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       OUR SYSTEM                                         â”‚
â”‚                                                                          â”‚
â”‚   [User Pays] â†’ [Backend Processes] â†’ [MQTT Command] â†’ [Meter Updated]  â”‚
â”‚                                                                          â”‚
â”‚                    FULLY AUTOMATED - NO MANUAL INTERVENTION              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Six Research Gaps Addressed

| Gap | How We Address It |
|-----|-------------------|
| **1. No M-Pesa automation** | Direct Daraja API â†’ Meter balance update |
| **2. Incomplete system architectures** | Full stack: Hardware + Cloud + Dashboard |
| **3. Poor user experience focus** | Modern React dashboard with real-time updates |
| **4. High costs for Africa** | Total prototype cost: KES 3,440 |
| **5. Not designed for Kenya** | Built for M-Pesa, CIU problems, local context |
| **6. Over-engineered IoT** | Appropriate technology without unnecessary complexity |

---

## SLIDE 7: SYSTEM ARCHITECTURE - FLOWCHART

### Complete System Flow (Beginning to End)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SYSTEM ARCHITECTURE FLOWCHART                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   USER DEVICE   â”‚
                              â”‚  (Smartphone/   â”‚
                              â”‚   Computer)     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                  â”‚                  â”‚
                    â–¼                  â–¼                  â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  WEB DASHBOARD â”‚  â”‚   M-PESA APP  â”‚  â”‚  USSD (*334#) â”‚
           â”‚   (React.js)   â”‚  â”‚  (Safaricom)  â”‚  â”‚  Basic Phone  â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                  â”‚
                   â”‚ HTTPS            â”‚ STK Push
                   â–¼                  â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚            CLOUD BACKEND                 â”‚
           â”‚           (Node.js/Express)              â”‚
           â”‚                                          â”‚
           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
           â”‚  â”‚  REST API   â”‚    â”‚ M-PESA DARAJA  â”‚  â”‚
           â”‚  â”‚  Endpoints  â”‚    â”‚  Integration   â”‚  â”‚
           â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
           â”‚         â”‚                   â”‚           â”‚
           â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
           â”‚                   â–¼                     â”‚
           â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
           â”‚         â”‚  MQTT SERVICE   â”‚             â”‚
           â”‚         â”‚  (Publisher)    â”‚             â”‚
           â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ MQTT (Port 8883)
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   MQTT BROKER   â”‚
                    â”‚  (HiveMQ Cloud) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                             â”‚
              â–¼                             â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ FIREBASE RTDB   â”‚           â”‚   ESP32 SMART   â”‚
     â”‚  (Database)     â”‚           â”‚     METER       â”‚
     â”‚                 â”‚           â”‚                 â”‚
     â”‚ â€¢ User Data     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ Wi-Fi Module  â”‚
     â”‚ â€¢ Balances      â”‚   Sync    â”‚ â€¢ SIM800L GSM   â”‚
     â”‚ â€¢ Transactions  â”‚           â”‚ â€¢ OLED Display  â”‚
     â”‚ â€¢ Consumption   â”‚           â”‚ â€¢ Status LEDs   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ â€¢ Load Control  â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  POWER LOAD     â”‚
                                   â”‚  (LED Simulationâ”‚
                                   â”‚   / Relay)      â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## SLIDE 8: PAYMENT FLOW - STEP BY STEP

### Automatic Recharge Process (3-6 seconds total)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: USER INITIATES PAYMENT                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  â€¢ User clicks "Recharge" on dashboard OR dials USSD                            â”‚
â”‚  â€¢ Enters amount (e.g., KES 100)                                                â”‚
â”‚  â€¢ Backend sends STK Push to user's phone                                       â”‚
â”‚  â€¢ Time: ~150ms                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: M-PESA PROCESSES PAYMENT                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  â€¢ User receives M-Pesa prompt on phone                                         â”‚
â”‚  â€¢ User enters M-Pesa PIN to confirm                                            â”‚
â”‚  â€¢ Safaricom processes transaction                                              â”‚
â”‚  â€¢ Time: 2-5 seconds (user-dependent)                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: CALLBACK & DATABASE UPDATE                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  â€¢ Safaricom sends callback to our backend                                      â”‚
â”‚  â€¢ Backend verifies payment & updates Firebase                                  â”‚
â”‚  â€¢ Transaction logged with receipt number                                       â”‚
â”‚  â€¢ Time: ~300ms                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: MQTT COMMAND TO METER                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  â€¢ Backend publishes balance update via MQTT                                    â”‚
â”‚  â€¢ Topic: smartmeter/{meterNo}/command/balance                                  â”‚
â”‚  â€¢ ESP32 receives command instantly                                             â”‚
â”‚  â€¢ Time: ~200ms                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 5: METER UPDATES & LOAD RECONNECTS                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  â€¢ ESP32 updates local balance                                                  â”‚
â”‚  â€¢ OLED display shows new balance                                               â”‚
â”‚  â€¢ If balance was 0, load automatically reconnects (LED turns ON)               â”‚
â”‚  â€¢ Confirmation buzzer sounds                                                   â”‚
â”‚  â€¢ SMS alert sent to user (optional)                                            â”‚
â”‚  â€¢ Time: ~100ms                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    TOTAL AUTOMATED PROCESSING: ~650ms
                    TOTAL WITH USER PIN ENTRY: 3-6 seconds
                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## SLIDE 9: METHODOLOGY - HARDWARE DESIGN

### ESP32 Smart Meter Prototype

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         HARDWARE COMPONENTS             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                 â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚   â”‚   ESP32     â”‚     â”‚    OLED     â”‚     â”‚   SIM800L   â”‚      â”‚
    â”‚   â”‚  DevKit V1  â”‚     â”‚  128x64     â”‚     â”‚  GSM/GPRS   â”‚      â”‚
    â”‚   â”‚             â”‚     â”‚  Display    â”‚     â”‚   Module    â”‚      â”‚
    â”‚   â”‚  â€¢ Dual Coreâ”‚     â”‚             â”‚     â”‚             â”‚      â”‚
    â”‚   â”‚  â€¢ Wi-Fi    â”‚â”€â”€â”€â”€â–ºâ”‚  Shows:     â”‚     â”‚  â€¢ 2G Data  â”‚      â”‚
    â”‚   â”‚  â€¢ 520KB RAMâ”‚     â”‚  â€¢ Balance  â”‚     â”‚  â€¢ SMS Alertsâ”‚     â”‚
    â”‚   â”‚  â€¢ 4MB Flashâ”‚     â”‚  â€¢ Status   â”‚     â”‚  â€¢ Fallback â”‚      â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
    â”‚          â”‚                                       â”‚              â”‚
    â”‚          â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚              â”‚
    â”‚          â”‚            â”‚   STATUS    â”‚           â”‚              â”‚
    â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚    LEDs     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
    â”‚                       â”‚             â”‚                          â”‚
    â”‚                       â”‚ ğŸ”µ Blue:    â”‚                          â”‚
    â”‚                       â”‚   Load ON   â”‚                          â”‚
    â”‚                       â”‚ ğŸŸ¢ Green:   â”‚                          â”‚
    â”‚                       â”‚   Balance OKâ”‚                          â”‚
    â”‚                       â”‚ ğŸ”´ Red:     â”‚                          â”‚
    â”‚                       â”‚   Warning   â”‚                          â”‚
    â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
    â”‚                                                                 â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
    â”‚   â”‚   BUZZER    â”‚     â”‚   POWER     â”‚                          â”‚
    â”‚   â”‚   (Active)  â”‚     â”‚   SUPPLY    â”‚                          â”‚
    â”‚   â”‚             â”‚     â”‚             â”‚                          â”‚
    â”‚   â”‚  â€¢ Alerts   â”‚     â”‚  â€¢ 5V/2A    â”‚                          â”‚
    â”‚   â”‚  â€¢ Recharge â”‚     â”‚  â€¢ USB      â”‚                          â”‚
    â”‚   â”‚  â€¢ Low Bal  â”‚     â”‚  â€¢ Stable   â”‚                          â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
    â”‚                                                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Bill of Materials

| Component | Specification | Cost (KES) |
|-----------|---------------|------------|
| ESP32 DevKit V1 | Dual-core, Wi-Fi, Bluetooth | 800 |
| OLED Display | 0.96" 128x64 I2C | 350 |
| SIM800L Module | GSM/GPRS 2G | 600 |
| Status LEDs (3x) | 5mm RGB | 50 |
| Active Buzzer | 5V, 85dB | 80 |
| Breadboard + Wires | 830-point | 300 |
| Power Supply | 5V 2A USB | 400 |
| Miscellaneous | Resistors, antenna | 160 |
| **TOTAL** | | **KES 3,440** |

---

## SLIDE 10: METHODOLOGY - SOFTWARE ARCHITECTURE

### Three-Tier Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              SOFTWARE STACK                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TIER 1: FRONTEND (User Interface)                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                                  â”‚
â”‚  Technology: React.js + TypeScript + TailwindCSS                                â”‚
â”‚                                                                                  â”‚
â”‚  Features:                                                                       â”‚
â”‚  â”œâ”€â”€ Real-time balance display                                                  â”‚
â”‚  â”œâ”€â”€ Consumption analytics (charts)                                             â”‚
â”‚  â”œâ”€â”€ Transaction history                                                        â”‚
â”‚  â”œâ”€â”€ One-click M-Pesa recharge                                                  â”‚
â”‚  â””â”€â”€ Responsive design (mobile + desktop)                                       â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ HTTPS/REST API
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TIER 2: BACKEND (Business Logic)                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                                  â”‚
â”‚  Technology: Node.js + Express.js                                               â”‚
â”‚                                                                                  â”‚
â”‚  Services:                                                                       â”‚
â”‚  â”œâ”€â”€ M-Pesa Daraja API Integration                                              â”‚
â”‚  â”‚   â”œâ”€â”€ STK Push (payment initiation)                                          â”‚
â”‚  â”‚   â””â”€â”€ Callback handler (payment confirmation)                                â”‚
â”‚  â”œâ”€â”€ MQTT Service                                                               â”‚
â”‚  â”‚   â”œâ”€â”€ Publish balance commands                                               â”‚
â”‚  â”‚   â””â”€â”€ Subscribe to consumption reports                                       â”‚
â”‚  â”œâ”€â”€ Firebase Service                                                           â”‚
â”‚  â”‚   â”œâ”€â”€ User management                                                        â”‚
â”‚  â”‚   â””â”€â”€ Real-time data sync                                                    â”‚
â”‚  â””â”€â”€ REST API Endpoints                                                         â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ MQTT (Pub/Sub)
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TIER 3: DEVICE (ESP32 Firmware)                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                                  â”‚
â”‚  Technology: C++ (Arduino Framework)                                            â”‚
â”‚                                                                                  â”‚
â”‚  Modules:                                                                        â”‚
â”‚  â”œâ”€â”€ Wi-Fi Manager (connection, reconnection)                                   â”‚
â”‚  â”œâ”€â”€ MQTT Client (subscribe/publish)                                            â”‚
â”‚  â”œâ”€â”€ GSM Handler (SMS alerts, data fallback)                                    â”‚
â”‚  â”œâ”€â”€ Display Controller (OLED updates)                                          â”‚
â”‚  â”œâ”€â”€ Balance Manager (consumption simulation)                                   â”‚
â”‚  â””â”€â”€ Alert System (LEDs, buzzer)                                                â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Languages Used

| Component | Language | Justification |
|-----------|----------|---------------|
| ESP32 Firmware | C++ | Industry standard for embedded systems, Arduino compatibility |
| Backend Server | JavaScript (Node.js) | Async I/O, excellent for real-time apps, MQTT libraries |
| Frontend Dashboard | TypeScript + React | Type safety, component reusability, modern UI |
| Database | Firebase RTDB | Real-time sync, free tier, JSON structure |

---

## SLIDE 11: METHODOLOGY - MQTT COMMUNICATION

### MQTT Topic Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MQTT COMMUNICATION                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚    MQTT BROKER      â”‚
                         â”‚   (HiveMQ Cloud)    â”‚
                         â”‚    Port: 8883       â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                     â”‚                     â”‚
              â–¼                     â–¼                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    BACKEND      â”‚   â”‚    ESP32        â”‚   â”‚   DASHBOARD     â”‚
    â”‚   PUBLISHES:    â”‚   â”‚   PUBLISHES:    â”‚   â”‚   SUBSCRIBES:   â”‚
    â”‚                 â”‚   â”‚                 â”‚   â”‚                 â”‚
    â”‚ smartmeter/     â”‚   â”‚ smartmeter/     â”‚   â”‚ (via Firebase)  â”‚
    â”‚ {meterNo}/      â”‚   â”‚ {meterNo}/      â”‚   â”‚                 â”‚
    â”‚ command/balance â”‚   â”‚ consumption     â”‚   â”‚                 â”‚
    â”‚                 â”‚   â”‚ status          â”‚   â”‚                 â”‚
    â”‚   SUBSCRIBES:   â”‚   â”‚ balance         â”‚   â”‚                 â”‚
    â”‚ smartmeter/+/   â”‚   â”‚                 â”‚   â”‚                 â”‚
    â”‚ consumption     â”‚   â”‚   SUBSCRIBES:   â”‚   â”‚                 â”‚
    â”‚ status          â”‚   â”‚ smartmeter/     â”‚   â”‚                 â”‚
    â”‚ balance         â”‚   â”‚ {meterNo}/      â”‚   â”‚                 â”‚
    â”‚                 â”‚   â”‚ command/balance â”‚   â”‚                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


    EXAMPLE MESSAGES:
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    Balance Command (Backend â†’ ESP32):
    Topic: smartmeter/METER001/command/balance
    Payload: {"balance": 150.50, "timestamp": 1702598400000}

    Consumption Report (ESP32 â†’ Backend):
    Topic: smartmeter/METER001/consumption
    Payload: {"meterNo": "METER001", "unitsConsumed": 0.5, 
              "remainingBalance": 150.00, "timestamp": 1702598460000}
```

---

## SLIDE 12: RESULTS - HARDWARE PERFORMANCE

### Prototype Performance Metrics

| Component | Specification | Observed Performance | Status |
|-----------|---------------|---------------------|--------|
| ESP32 Wi-Fi | 802.11 b/g/n | Consistent @ 2.4GHz | âœ… Excellent |
| OLED Display | 128x64 pixels | Clear, high-contrast | âœ… Excellent |
| LED Load Simulation | 5mm Blue LED | Clear visual indication | âœ… Excellent |
| SIM800L GSM | 2G GPRS | SMS alerts working (Airtel) | âœ… Good |
| Power Consumption | Est. <500mA | Measured 280-320mA | âœ… Better |

### Load Control Accuracy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    50 TEST CYCLES                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Disconnection Accuracy (balance = 0):     100% (50/50)        â”‚
â”‚  Reconnection Reliability (after recharge): 100% (50/50)       â”‚
â”‚  Average Reconnection Time:                 1-3 seconds        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### OLED Display Output

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IoT Smart Meter    â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚   KES 347.50         â”‚
â”‚                      â”‚
â”‚   WiFi: â—  MQTT: â—   â”‚
â”‚   Load: ON           â”‚
â”‚   0.5 KES/hr         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## SLIDE 13: RESULTS - SYSTEM PERFORMANCE

### End-to-End Transaction Performance

| Metric | Target | Achieved | Status |
|--------|--------|----------|--------|
| Total Transaction Time | < 10s | **3.2s avg** | âœ… Exceeded |
| Automated Processing Time | < 5s | **1.8s avg** | âœ… Exceeded |
| Balance Update Accuracy | 100% | **100%** | âœ… Perfect |
| Load Reconnection Success | 100% | **100%** | âœ… Perfect |
| Transaction Logging | 100% | **100%** | âœ… Perfect |

### Backend API Performance

| Endpoint | Avg Response Time | 95th Percentile |
|----------|-------------------|-----------------|
| GET /api/meters/:id | 145 ms | 220 ms |
| POST /api/meters/:id/balance | 180 ms | 280 ms |
| POST /daraja/callback | 320 ms | 480 ms |

### System Uptime

- **Uptime:** 99.7% over 30-day test period
- **Error Rate:** 0.3% (network timeouts only)
- **MQTT Message Success:** 99.7%

---

## SLIDE 14: RESULTS - COMPARISON WITH TRADITIONAL SYSTEM

### Our System vs. Traditional SMS Token System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PERFORMANCE COMPARISON                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        TRADITIONAL SYSTEM          OUR SYSTEM
                        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Recharge Time       3-5 minutes                 3-6 seconds
                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ        â–ˆ
                        
    Manual Steps        4-6 steps                   1 step (Pay)
                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ              â–ˆâ–ˆ
                        
    Error Rate          15-20%                      <0.5%
                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ            
                        
    User Satisfaction   65%                         96%
                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ               â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
```

### Key Improvements

| Aspect | Traditional | Our System | Improvement |
|--------|-------------|------------|-------------|
| **Time** | 3-5 min | 3-6 sec | **60x faster** |
| **Manual Steps** | 4-6 | 1 | **80% reduction** |
| **Error Rate** | 15-20% | <0.5% | **40x reduction** |
| **User Satisfaction** | 65% | 96% | **+48%** |

---

## SLIDE 15: RESULTS - COST ANALYSIS

### Development Cost

| Category | Cost (KES) |
|----------|-----------|
| Hardware Components | 3,440 |
| Cloud Services (Free Tier) | 0 |
| Development Tools | 0 |
| **TOTAL** | **3,440** |

### Comparison with Commercial Solutions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       COST PER METER                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Our Prototype        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  KES 3,440
    
    Basic Smart Meter    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  KES 8,000 - 12,000
    
    Advanced AMI Meter   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  KES 15,000 - 25,000

                         SAVINGS: 55-85% cheaper
```

### Projected Annual Savings (Per 10,000 Meters)

| Category | Traditional | Our System | Savings |
|----------|-------------|------------|---------|
| Customer Support (token issues) | KES 5M | KES 500K | KES 4.5M |
| CIU Replacement/Repair | KES 3M | KES 0 | KES 3M |
| Field Technician Visits | KES 2.5M | KES 500K | KES 2M |
| SMS Gateway Fees | KES 1.2M | KES 0 | KES 1.2M |
| **TOTAL ANNUAL** | | | **KES 10.7M** |

### Return on Investment

- **Payback Period:** 1.6 years
- **5-Year ROI:** 207%

---

## SLIDE 16: RESULTS - USER FEEDBACK

### Usability Testing Results (10 Test Users)

| Aspect | Rating (1-5) | Feedback |
|--------|--------------|----------|
| Ease of Use | **4.7** | "Very intuitive, easy to navigate" |
| Visual Design | **4.8** | "Clean, modern, professional" |
| Recharge Process | **4.5** | "Much faster than entering tokens" |
| Information Clarity | **4.9** | "Everything I need is visible" |
| **Overall Satisfaction** | **4.8** | "Huge improvement over current system" |

### Dashboard Screenshots

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DASHBOARD FEATURES                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   BALANCE       â”‚  â”‚   CONSUMPTION   â”‚  â”‚   RECHARGE      â”‚                  â”‚
â”‚  â”‚   â”â”â”â”â”â”â”â”â”     â”‚  â”‚   â”â”â”â”â”â”â”â”â”     â”‚  â”‚   â”â”â”â”â”â”â”â”â”     â”‚                  â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚                  â”‚
â”‚  â”‚   KES 347.50    â”‚  â”‚   ğŸ“Š Graph      â”‚  â”‚   [Recharge]    â”‚                  â”‚
â”‚  â”‚   â— Balance OK  â”‚  â”‚   Daily/Weekly  â”‚  â”‚   Quick amounts â”‚                  â”‚
â”‚  â”‚   Est: 28 hrs   â”‚  â”‚   Monthly view  â”‚  â”‚   50|100|200    â”‚                  â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## SLIDE 17: CODE SNIPPETS

### ESP32 - Balance Update Handler (C++)

```cpp
void callback(char* topic, byte* payload, unsigned int length) {
  String message;
  for (int i = 0; i < length; i++) {
    message += (char)payload[i];
  }
  
  // Parse JSON payload
  StaticJsonDocument<256> doc;
  deserializeJson(doc, message);
  
  // Update balance
  float newBalance = doc["balance"];
  balance = newBalance;
  
  // Control load based on balance
  if (balance > 0) {
    digitalWrite(LOAD_LED, HIGH);  // Power ON
    Serial.println("[RECHARGE] Load reconnected!");
  }
  
  // Update display
  updateOLED();
  playRechargeSound();
}
```

### Backend - M-Pesa Callback Handler (JavaScript)

```javascript
router.post('/daraja/callback', async (req, res) => {
  const { Body } = req.body;
  const resultCode = Body.stkCallback.ResultCode;
  
  if (resultCode === 0) {  // Success
    const amount = Body.stkCallback.CallbackMetadata.Item[0].Value;
    const receipt = Body.stkCallback.CallbackMetadata.Item[1].Value;
    
    // Update Firebase
    await db.ref(`meters/${meterNo}/balance`).transaction(current => 
      (current || 0) + amount
    );
    
    // Send MQTT command to ESP32
    mqttClient.publish(`smartmeter/${meterNo}/command/balance`, 
      JSON.stringify({ balance: newBalance, timestamp: Date.now() })
    );
  }
  res.json({ ResultCode: 0, ResultDesc: "Success" });
});
```

---

## SLIDE 18: CONCLUSION

### Objectives Achievement Summary

| Objective | Status | Evidence |
|-----------|--------|----------|
| 1. ESP32 Smart Meter Prototype | âœ… **ACHIEVED** | Working hardware with all features |
| 2. Cloud Backend + M-Pesa Integration | âœ… **ACHIEVED** | 48/50 successful sandbox tests |
| 3. User Dashboard Development | âœ… **ACHIEVED** | 4.8/5 user satisfaction rating |
| 4. MQTT Communication | âœ… **ACHIEVED** | 99.7% message success rate |
| 5. System Validation | âœ… **ACHIEVED** | 100% transaction accuracy |

### Key Achievements

- **Eliminated manual token entry** - First system to fully automate M-Pesa to meter recharge
- **60x faster** than traditional recharge process
- **78-93% cost reduction** compared to commercial smart meters
- **99.7% system uptime** demonstrating production-ready reliability
- **96% user satisfaction** vs. 65% for traditional systems

### Significance

âœ… **Technological:** Proves affordable AMI is achievable for developing economies  
âœ… **Economic:** KES 10.7M annual savings potential per 10,000 meters  
âœ… **Social:** Addresses pain points affecting 3M+ Kenyan prepaid customers  

---

## SLIDE 19: RECOMMENDATIONS

### For Production Deployment

1. **Hardware Upgrades**
   - Replace LED simulation with actual relay for load control
   - Upgrade SIM800L (2G) to SIM7600 (4G) for better GSM reliability
   - Add current sensor (ACS712) for real energy measurement

2. **Security Enhancements**
   - Implement MQTTS (TLS encryption) for all communications
   - Add device authentication with unique certificates per meter
   - Implement rate limiting and anomaly detection

3. **Scalability Improvements**
   - Deploy private MQTT broker (e.g., EMQX, Mosquitto)
   - Implement message queuing for offline devices
   - Set up multi-region cloud deployment

4. **Regulatory Compliance**
   - Work with Kenya Power for meter certification
   - Obtain KEBS standards approval
   - Ensure M-Pesa production API compliance

### For Future Research

- Explore blockchain for tamper-proof transaction logging
- Integrate with renewable energy sources (solar)
- Implement AI for consumption prediction and anomaly detection

---

## SLIDE 20: REFERENCES

1. Kumar, A. et al. (2020). "NodeMCU-based prepaid energy meter with IoT," *International Journal of Engineering Research*

2. Okonkwo, N. et al. (2021). "ESP32-based smart prepaid meter for Nigerian power grid," *IEEE African Conference*

3. Githae, W. et al. (2022). "LoRaWAN-enabled prepaid meter for rural Kenya," *East African Journal of Engineering*

4. Safaricom. (2024). "Daraja API Documentation," *developer.safaricom.co.ke*

5. Kenya Power. (2023). "Annual Report: Prepaid Metering Statistics"

6. World Bank. (2022). "Smart Grid Development in Sub-Saharan Africa"

7. Mwangi, J. & Karanja, P. (2020). "Consumer acceptance of smart meters in Kenya," *Journal of Energy Policy*

8. Espressif Systems. (2024). "ESP32 Technical Reference Manual"

9. HiveMQ. (2024). "MQTT Protocol Specification v5.0"

10. Firebase. (2024). "Realtime Database Documentation," *firebase.google.com*

---

## SLIDE 21: THANK YOU

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                            â”‚
â”‚                           THANK YOU                                        â”‚
â”‚                                                                            â”‚
â”‚               QUESTIONS & DISCUSSION WELCOME                               â”‚
â”‚                                                                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                            â”‚
â”‚                    DEDAN KIMATHI UNIVERSITY OF TECHNOLOGY                  â”‚
â”‚                                  [LOGO]                                    â”‚
â”‚                                                                            â”‚
â”‚                    Private Bag - Dedan Kimathi                             â”‚
â”‚                    Nyeri-Mweiga Road                                       â”‚
â”‚                                                                            â”‚
â”‚                    Telephone: +254-061-2050000                             â”‚
â”‚                    Email: vc@dkut.ac.ke                                    â”‚
â”‚                    Website: www.dkut.ac.ke                                 â”‚
â”‚                                                                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                            â”‚
â”‚   Project Team:                                                            â”‚
â”‚   â€¢ Moses Maingi    (E021-01-1297/2021)                                    â”‚
â”‚   â€¢ Kelvin Limo     (E021-01-1302/2021)                                    â”‚
â”‚   â€¢ Daniel Kimoi    (E021-01-1318/2021)                                    â”‚
â”‚                                                                            â”‚
â”‚   Supervisor: Mr. Ndegwa                                                   â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# APPENDIX: ADDITIONAL DIAGRAMS

## A1: Detailed Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COMPLETE DATA FLOW DIAGRAM                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  USER   â”‚         â”‚ M-PESA  â”‚         â”‚ BACKEND â”‚         â”‚  ESP32  â”‚
    â”‚         â”‚         â”‚ SYSTEM  â”‚         â”‚ SERVER  â”‚         â”‚  METER  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚                   â”‚                   â”‚                   â”‚
         â”‚  1. Request       â”‚                   â”‚                   â”‚
         â”‚  Recharge         â”‚                   â”‚                   â”‚
         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
         â”‚                   â”‚                   â”‚                   â”‚
         â”‚                   â”‚  2. STK Push      â”‚                   â”‚
         â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚
         â”‚                   â”‚                   â”‚                   â”‚
         â”‚  3. M-Pesa        â”‚                   â”‚                   â”‚
         â”‚  Prompt           â”‚                   â”‚                   â”‚
         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚                   â”‚
         â”‚                   â”‚                   â”‚                   â”‚
         â”‚  4. Enter PIN     â”‚                   â”‚                   â”‚
         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚                   â”‚
         â”‚                   â”‚                   â”‚                   â”‚
         â”‚                   â”‚  5. Payment       â”‚                   â”‚
         â”‚                   â”‚  Callback         â”‚                   â”‚
         â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
         â”‚                   â”‚                   â”‚                   â”‚
         â”‚                   â”‚                   â”‚  6. Update        â”‚
         â”‚                   â”‚                   â”‚  Firebase         â”‚
         â”‚                   â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”           â”‚
         â”‚                   â”‚                   â”‚       â”‚           â”‚
         â”‚                   â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”˜           â”‚
         â”‚                   â”‚                   â”‚                   â”‚
         â”‚                   â”‚                   â”‚  7. MQTT          â”‚
         â”‚                   â”‚                   â”‚  Balance Cmd      â”‚
         â”‚                   â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
         â”‚                   â”‚                   â”‚                   â”‚
         â”‚                   â”‚                   â”‚                   â”‚  8. Update
         â”‚                   â”‚                   â”‚                   â”‚  Display
         â”‚                   â”‚                   â”‚                   â”‚â”€â”€â”€â”
         â”‚                   â”‚                   â”‚                   â”‚   â”‚
         â”‚                   â”‚                   â”‚                   â”‚â—„â”€â”€â”˜
         â”‚                   â”‚                   â”‚                   â”‚
         â”‚                   â”‚                   â”‚  9. Confirm       â”‚
         â”‚                   â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
         â”‚                   â”‚                   â”‚                   â”‚
         â”‚  10. Dashboard    â”‚                   â”‚                   â”‚
         â”‚  Updates          â”‚                   â”‚                   â”‚
         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚
         â”‚                   â”‚                   â”‚                   â”‚
    â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€
                           TIME: 3-6 SECONDS TOTAL
```

## A2: State Diagram - Meter States

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         METER STATE DIAGRAM                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   STARTUP    â”‚
                                    â”‚              â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â”‚ Initialize
                                           â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   CONNECTING_WIFI      â”‚
                              â”‚   ğŸ”µ LED: Blinking     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ Success       â”‚               â”‚ Fail
                           â–¼               â”‚               â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ CONNECTING_MQTT â”‚      â”‚      â”‚  GSM_FALLBACK   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚      â”‚  ğŸ”´ LED: Slow   â”‚
                           â”‚               â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ Success       â”‚               â”‚
                           â–¼               â”‚               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                      OPERATIONAL                               â”‚
    â”‚                                                                â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚   â”‚   ACTIVE    â”‚â—„â”€â”€â”€â”€â”€â”€â–ºâ”‚ LOW_BALANCE â”‚â—„â”€â”€â”€â”€â”€â”€â–ºâ”‚DISCONNECTEDâ”‚ â”‚
    â”‚   â”‚             â”‚        â”‚             â”‚        â”‚            â”‚ â”‚
    â”‚   â”‚ ğŸŸ¢ Green ON â”‚        â”‚ ğŸ”´ Blinking â”‚        â”‚ ğŸ”´ Solid   â”‚ â”‚
    â”‚   â”‚ ğŸ”µ Load ON  â”‚        â”‚ ğŸ”µ Load ON  â”‚        â”‚ ğŸ”µ Load OFFâ”‚ â”‚
    â”‚   â”‚ Balance > 50â”‚        â”‚ Balance<50  â”‚        â”‚ Balance = 0â”‚ â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚         â–²                                              â”‚       â”‚
    â”‚         â”‚                   RECHARGE                   â”‚       â”‚
    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
    â”‚                                                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# NOTES FOR PRESENTERS

## Slide Timing (20 minutes total)
- Slides 1-4: 4 minutes (Introduction, Background, Problem, Objectives)
- Slides 5-6: 3 minutes (Literature Review, Research Gap)
- Slides 7-11: 5 minutes (System Architecture, Methodology)
- Slides 12-16: 5 minutes (Results)
- Slides 17-20: 3 minutes (Code, Conclusion, Recommendations, Thank You)

## Key Points to Emphasize
1. **Unique contribution**: Full automation - no manual token entry
2. **Flowchart**: Walk through the complete flow diagram
3. **Performance**: 60x faster, 100% accuracy
4. **Cost**: KES 3,440 vs KES 15,000+ commercial
5. **Local context**: Designed specifically for Kenya and M-Pesa

## Demo Preparation
- Have ESP32 prototype powered and connected
- Dashboard open in browser
- Show live balance update if possible
- Backup: Screenshots and video recording

## Anticipated Questions
- "What about security?" â†’ TLS planned for production
- "Why 2G GSM?" â†’ Budget constraint, proves concept, upgrade path clear
- "What if WiFi fails?" â†’ GSM fallback, queued commands
- "Real relay vs LED?" â†’ Safety for development, same GPIO logic
